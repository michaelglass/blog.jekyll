<!doctype html>
<!--[if lt IE 7 ]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]>	   <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]>	   <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title>IE6 Background flicker once again | roderick.dk</title>
		
		<meta name="author" content="Morgan Roderick" />

		<!-- Mobile viewport optimized: j.mp/bplateviewport -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<!-- CSS: implied media="all" -->
		<link rel="stylesheet" href="/stylesheets/style.css?v=2" />

		<!-- Place favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
	</head>
	<body>
	  <div id="container">
		<header>
			<a href="/" class="home">roderick.dk</a>
			<ul class="nav">
				<li><a href="/">Blog</a></li>
				<li><a href="/archives.html">Archives</a></li>
				<li><a href="/about/">About</a></li>
				<li><a href="/contact/">Contact</a></li>
			</ul>
			<a href="/atom.xml" class="feed">Subscribe to the feed</a>
		</header>
		<div id="main" role="main">
			<div class="article">
	<article>
		<h1>IE6 Background flicker once again</h1>
		<p>Every once in awhile you come across one of those Internet Explorer 6 issues that tries it&#8217;s hardest to be really annoying. Today was one of those days with IE.</p>

<p>Having flown out to work directly with a client&#8217;s web team yesterday, I spent some time today cursing at IE6 and trying to deal with a weird flickering of the webpage, apparently caused by hovering over a menu.</p>

<p>After about 40 minutes, I had the palm&#8211;meets&#8211;forehead &#8220;heureka&#8221; moment, and recognised that the bug I was seeing was in fact the infamous IE6 background flicker bug, which I&#8217;ve exterminated on other sites before.</p>

<p>In order not to forget about the solution immediately, I am posting it here. Perhaps it may also shortcut the synapses of another developer and save them some time trying to squash this bug.</p>

<p>I cannot take credit for the solution, I am just posting my preferred version of it here for posterity. The solution is very simple, albeit a bit obscure.</p>
<div class='highlight'><pre><code class='javascript'><span class='c1'>// prevent background flickering bug in Internet Explorer 6</span>
<span class='k'>try</span> <span class='p'>{</span>
	<span class='nb'>document</span><span class='p'>.</span><span class='nx'>execCommand</span><span class='p'>(</span><span class='s2'>&quot;BackgroundImageCache&quot;</span><span class='p'>,</span><span class='kc'>false</span><span class='p'>,</span><span class='kc'>true</span><span class='p'>));</span>
<span class='p'>}</span> <span class='k'>catch</span><span class='p'>(</span><span class='nx'>e</span><span class='p'>)</span> <span class='p'>{}</span>
</code></pre>
</div>
<p>To avoid pollution the rest of the website for users with modern browsers, I prefer to stick this in my IE6.js file and load it using conditional comments.</p>
<div class='highlight'><pre><code class='html'><span class='c'>&lt;!--[if lte IE 7]&gt;</span>
<span class='c'>	&lt;script type=&quot;text/javascript&quot; src=&quot;/javascripts/ie6.js&quot;&gt;&lt;/script&gt;</span>
<span class='c'>&lt;![endif]--&gt;</span>
</code></pre>
</div>
<p>This is yet another example of developers using Internet Explorers misguided proprietary extensions to counter some of all the obscsure bugs.</p>

<h2 id='when_should_i_use_this'>When should I use this?</h2>

<p>You should be using this fix on every site that uses background images and mouse over effects &#8230; so basically, you should <em>always</em> be using this for sites that need to support IE6, and so should I.</p>

<p>Thankfully, we&#8217;re seeing the start of a global movement to be rid of IE6 once and for all, and soon we will be able to throw out all the weird fixes for Internet Explorer 6.</p>

<p>Recently, DR (Denmarks Radio) announced that they&#8217;re <a href='http://www.version2.dk/artikel/10451-dr-dropper-internet-explorer-6'>dropping IE6 for IE8 on the machines of 3.000 employees</a> &#8230; and with more and more organisations finally moving out of the dark ages, we can finally lay this old horse to rest.</p>

<h2 id='this_fix_seen_elsewhere'>This fix seen elsewhere</h2>

<ul>
<li><a href='http://misterpixel.blogspot.com/2006/09/forensic-analysis-of-ie6.html'>A forensic analysis of the IE6 BackgroundImageCache command identifier</a></li>

<li><a href='http://evil.che.lu/2006/09/25/no-more-ie6-background-flicker'>No more IE6 background flicker</a></li>
</ul>

<h2 id='update__fixing_it_server_side'>Update - Fixing it server side</h2>

<p><a href='http://www.robertnyman.com'>Robert Nyman</a> pointed me towards <a href='http://dean.edwards.name/my/flicker.html'>Dean Edwards&#8217; solution using expiration headers</a>, which you should be setting anyway, see (<a href='http://developer.yahoo.com/performance/rules.html#expires'>YDN article - Add an Expires or a Cache-Control Header</a>).</p>

<p>To improve user experience, we&#8217;ve been adding cache-control headers to just about everything for quite some time, so maybe that is why IE6 background flickering is a problem we don&#8217;t encounter that frequently anymore.</p>

<p>It&#8217;s good to know that you have options.</p>
		
		
	</article>
</div>
		</div>
		<footer>
			&copy;Morgan Roderick, unless otherwise noted.
		</footer>
	  </div>

	  <!-- mathiasbynens.be/notes/async-analytics-snippet Change UA-XXXXX-X to be your site's ID -->
	  <script>
		var _gaq=[["_setAccount","UA-869742-1"],["_trackPageview"]];
		(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
		g.src=("https:"==location.protocol?"//ssl":"//www")+".google-analytics.com/ga.js";
		s.parentNode.insertBefore(g,s)}(document,"script"));
	  </script>
	</body>
</html>